"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[202],{2202:function(e,n,r){r.r(n),r.d(n,{default:function(){return K}});var t=r(9439),a=r(1614),i=r(6151),o=r(8141),l=r(4164),s=r(2007),c=r.n(s),u=r(184),d=function(e){var n=e.onClick;return(0,l.createPortal)((0,u.jsx)(i.Z,{variant:"contained",size:"large",startIcon:(0,u.jsx)(o.Z,{}),onClick:n,sx:{position:"fixed",bottom:"10%",right:"40%"},children:"Add contact"}),document.querySelector("#modal-root"))};d.propType={onClick:c().func.isRequired};var m=r(7665),h=r(5289),f=r(7123),x=r(9157),p=r(1691),b=r(5661),j=r(4554),v=r(5705),Z=r(6727);function C(e){var n=e.onSubmit,r=e.onCancel,t=e.modalIsOpen,a=e.formTitle,o=e.itemData,s=Z.Ry().shape({name:Z.Z_().min(2,"Min 2 letter!").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"only letters, apostrophe, dash and spaces").required("Required!"),number:Z.Z_().matches(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/,"Invalid phone number.").required("Required!")}),c=(0,v.TA)({initialValues:{name:(null===o||void 0===o?void 0:o.name)||"",number:(null===o||void 0===o?void 0:o.number)||""},validationSchema:s,onSubmit:function(e){n({id:null===o||void 0===o?void 0:o.id,name:e.name,number:e.number})}});return(0,l.createPortal)((0,u.jsx)("div",{children:(0,u.jsx)(h.Z,{open:t,onClose:r,children:(0,u.jsxs)(j.Z,{component:"form",noValidate:!0,onSubmit:c.handleSubmit,children:[(0,u.jsx)(b.Z,{children:a}),(0,u.jsxs)(x.Z,{children:[(0,u.jsx)(p.Z,{}),(0,u.jsx)(m.Z,{id:"name",name:"name",type:"text",margin:"dense",label:"Name",fullWidth:!0,variant:"outlined",value:c.values.name,title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",onChange:c.handleChange,required:!0,onBlur:c.handleBlur,error:!(!c.touched.name||!c.errors.name),helperText:c.touched.name&&c.errors.name}),(0,u.jsx)(m.Z,{id:"number",margin:"dense",label:"Phone number",fullWidth:!0,variant:"outlined",type:"tel",name:"number",value:c.values.number,title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",onChange:c.handleChange,required:!0,onBlur:c.handleBlur,error:!(!c.touched.number||!c.errors.number),helperText:c.touched.number&&c.errors.number})]}),(0,u.jsxs)(f.Z,{children:[(0,u.jsx)(i.Z,{onClick:r,children:"Cancel"}),(0,u.jsx)(i.Z,{type:"submit",children:"Ok"})]})]})})}),document.querySelector("#modal-root"))}var g=r(2791),y=r(9434),w=r(5339),k=r(6351),S=r(493),A=r(4852),z=r(7621),q=r(890),I=r(533),_=r(3400),T=r(383),P=r(1286),W=function(e){var n=e.title,r=e.children,t=e.id,a=e.setOpen,o=e.onConfirm;return(0,l.createPortal)((0,u.jsxs)(h.Z,{open:!!t,onClose:function(){return a(!1)},"aria-labelledby":"confirm-dialog",children:[(0,u.jsx)(b.Z,{id:"confirm-dialog",children:n}),(0,u.jsx)(x.Z,{children:r}),(0,u.jsxs)(f.Z,{children:[(0,u.jsx)(i.Z,{variant:"outlined",onClick:function(){return a(null)},color:"secondary",children:"No"}),(0,u.jsx)(i.Z,{variant:"outlined",onClick:function(){o(t),a(null)},color:"primary",children:"Yes"})]})]}),document.querySelector("#modal-root"))},B=function(e){var n=e.onEdit,r=(0,y.v9)(k.K2),a=(0,y.I0)(),i=(0,y.v9)(k.zK),o=(0,g.useState)(null),l=(0,t.Z)(o,2),s=l[0],c=l[1],d=(0,g.useMemo)((function(){return(i?r.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())})):r).toSorted((function(e,n){return e.name.toLowerCase()<n.name.toLowerCase()?-1:1}))}),[r,i]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(S.Z,{children:d.map((function(e){var r=e.id,t=e.name,a=e.number;return(0,u.jsx)(A.ZP,{children:(0,u.jsxs)(z.Z,{sx:{display:"flex",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,u.jsxs)(j.Z,{sx:{display:"flex",flexWrap:"wrap",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,u.jsx)(q.Z,{variant:"h5",sx:{mr:"auto",ml:1},children:"".concat(t)}),(0,u.jsx)(I.Z,{href:"tel:".concat(a.replaceAll(/[ \-.()]/g,"")),underline:"none",children:(0,u.jsx)(q.Z,{variant:"h5",sx:{mr:1},children:"".concat(a)})})]}),(0,u.jsxs)(j.Z,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},alignItems:"center"},children:[(0,u.jsx)(_.Z,{size:"large",color:"inherit",onClick:function(){n({id:r,name:t,number:a})},children:(0,u.jsx)(P.Z,{fontSize:"inherit"})}),(0,u.jsx)(_.Z,{size:"large",color:"inherit",onClick:function(){c(r)},children:(0,u.jsx)(T.Z,{fontSize:"inherit"})})]})]})},r)}))}),s&&(0,u.jsx)(W,{title:"Delete contact?",id:s,setOpen:c,onConfirm:function(e){a((0,w.xX)(e))},children:"Are you sure?"})]})},E=r(6895),O=function(){var e=(0,y.v9)(k.zK),n=(0,y.I0)();return(0,u.jsx)(m.Z,{label:"Find contacts by name",id:"standard-search",type:"search",variant:"standard",fullWidth:!0,sx:{mt:3,mb:3},name:"filter",value:e,onChange:function(e){(e.target.name="filter")&&n((0,E.T)(e.target.value))},autoComplete:"off"})},D=r(5218),F=r(905),K=function(){var e=(0,y.v9)(F.M7),n=(0,y.I0)(),r=(0,y.v9)(k.K2),i=(0,g.useState)(!1),o=(0,t.Z)(i,2),l=o[0],s=o[1],c=(0,g.useState)(null),m=(0,t.Z)(c,2),h=m[0],f=m[1],x=(0,y.v9)(k.by);(0,g.useEffect)((function(){e&&n((0,w.VC)())}),[n,e]),(0,g.useEffect)((function(){x&&D.Am.error(x)}),[x]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.Z,{component:"main",children:[l&&(0,u.jsx)(C,{modalIsOpen:!0,formTitle:h?"Edit contact":"Add contact",onCancel:function(){s(!1),f(null)},onSubmit:function(e){var t=e.id,a=e.name,i=e.number;(t?r.filter((function(e){var n=e.id;return t!==n})):r).some((function(e){return e.name===a}))?D.Am.error("".concat(a," is already in contacts."),{duration:1500}):(t?r.some((function(e){var n=e.id,r=e.name,o=e.number;return t===n&&a===r&&i===o}))||n((0,w.hx)({id:t,name:a,number:i})):n((0,w.je)({name:a,number:i})),s(!1),f(null))},itemData:h}),(0,u.jsx)(O,{}),(0,u.jsx)(B,{onEdit:function(e){s(!0),f(e)}}),(0,u.jsx)(d,{onClick:function(){s(!0)}})]}),(0,u.jsx)(D.x7,{})]})}}}]);
//# sourceMappingURL=202.9dc61549.chunk.js.map